Building both a package and an executable
=========================================

Sometimes you might want to build both a package and one or more
executables.

~~~~ tests/package-and-executable/Hello.hs
module Hello where
hello = "hello world"
~~~~

~~~~ tests/package-and-executable/Greet.hs
module Greet where
greet = putStrLn
~~~~

~~~~ tests/package-and-executable/hello-world.hs
import Hello
import Greet
main = greet hello
~~~~

Setup.hs
--------

This couldn't be much easier.  You just need to indicate how to build
them and then return a list with two elements:

~~~~ tests/package-and-executable/Setup.hs
import Distribution.Franchise

main = build [] $
       do e <- executable "hello" "hello-world.hs" []
          p <- package "hello" ["Hello"] []
          return (p++e)
~~~~

Testing it out
--------------

~~~~ tests/package-and-executable/package-and-executable.sh
set -ev
runghc Setup.hs build
./hello
./hello | grep 'hello world'
~~~~
